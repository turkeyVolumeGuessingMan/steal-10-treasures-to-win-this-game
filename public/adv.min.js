function cmd(e,o){game.directionsReversed&&("left"===e?e="right":"right"===e?e="left":"up"===e?e="down":"down"===e&&(e="up")),Array.isArray(e)?e.map(e=>cmd(e,o)):game.commands[e.toLowerCase()]=o}function addCursor(){var e=document.createElement("div"),o=document.createElement("div"),o=(e.id="parser",e.classList="parser res",o.className="cursor",o.innerHTML="▌",e.append("> "),e.append(o),document.getElementById("con"));o.append(e),window.scrollTo(0,o.scrollHeight)}function repCursor(e){var o=document.getElementById("parser"),t=document.createElement("div"),e=(t.className="cursor",t.append("▌"),o.innerHTML="",o.append("> "),o.append(e),o.append(t),document.getElementById("con"));window.scrollTo(0,e.scrollHeight)}function remCursor(){for(const e of[...document.getElementsByClassName("parser")])e.remove()}function stringToHash(e){var o=0;if(0!=e.length)for(i=0;i<e.length;i++)o=(o<<5)-o+(char=e.charCodeAt(i)),o&=o;return o}function intro(){bigSpacer(),msg("Welcome Adventurer to"),msg("Steal 10 Treasures to Win This Game","title"),spacer(),msg("a game by spaceflounder"),msg('Written for <a href="https://itch.io/jam/parsercomp-2023" target="_blank" rel="noopener noreferrer">ParserComp 2023</a> Version 1.0.4'),msg("IFID: ED3AF785-8B62-42B5-B90C-7BD44185B705"),msg("Type ~? and Enter key if playing for first time!"),spacer()}function msg(e,o){var t,a=document.getElementById("con");a&&(t=document.createElement("div"),o?t.classList=o:t.className="sep",e=[(lst=e.split("~")).shift(),...lst.map(e=>{return[`<span class="key">${e.slice(0,1)}</span>`,e.slice(1)].join("")})].join(""),t.innerHTML=e,a.append(t),window.scrollTo(0,a.scrollHeight))}function spacer(){msg("","spacer")}function bigSpacer(){msg("","big-spacer")}function clear(){var e=document.getElementById("con");e&&(e.innerHTML="")}function msu(){if(!game.music&&game.musicToggle){const e=["Pretty Little Lies","First Snow","Dreams","Plants","Ramen","Endless Grind","City Lights","Winter Blues","Day Trips"];game.track=0,game.music=new Audio(`HoliznaCC0 - ${e[game.track]}.mp3`);setTimeout(()=>{game.music.play(),game.music.addEventListener("ended",()=>{game.track+=1,game.track===e.length&&(game.track=0),game.music.src=`HoliznaCC0 - ${e[game.track]}.mp3`,game.music.load(),setTimeout(()=>{game.music.play()},2e3)},!1)},3e3)}}Game.items.chowderSign={shortDesc:"festive sign",initialLocation:"scullery",desc:"A festive sign is posted here. It reads: “Castle Chowder Festival — Down Stairs.” It appears to be a bit loose on the wall.",h:["give me a hint will you","This sign isn't nailed down."],inv:e=>"chowderSign"!==game.item?["remove the festive sign from the wall and take it",()=>{"smellyRoom"===game.location?msg("The sign is stuck where it is."):(takeItem("chowderSign"),"diningHall"===game.things.chowderFestival.location&&(msg("It sounds like they're packing up that festival downstairs to go somewhere else."),game.things.chowderFestival.location=""),refresh())}]:["post the "+e.shortDesc,()=>{"toolRoom"===game.location?msg("There's no place on the wall to post the sign."):(dropItem("chowderSign"),"smellyRoom"===game.location&&(msg(`A great and terrible roar echoes from down the stairs, as if a huge and murderous beast had been 
                        slaughtered by the participants of a chowder festival.`),game.items.chowderSign.desc="A festive sign is posted here. It reads: “Castle Chowder Festival — Down Stairs.” It appears to be very stuck to the wall.",game.things.chowderFestival.location="clamRoom",game.things.ferociousClam.location="",game.things.clamPearl.location="clamRoom"),refresh())}]},Game.items.screwdriver={shortDesc:"Phillips head screwdriver",initialLocation:"toolRoom",desc:"A Phillips head screwdriver lies here at your feet.",h:["give me a hint will you","Persistence pays off. Keep trying to take the screwdriver."],inv:e=>["take "+e.shortDesc,()=>{game.screwdriver||(game.rooms.toolRoom.attempt?1===game.rooms.toolRoom.attempt?(game.rooms.toolRoom.attempt=2,kill(`You grab the Phillips head screwdriver, and while doing so, you slip and STAB yourself with it! As 
                the darkness closes in, you notice the writing on the sign seems to have changed.`,"You have picked up a semi-sharp object and died","toolRoom")):2===game.rooms.toolRoom.attempt?(game.rooms.toolRoom.attempt=3,kill(`You grab the Phillips head screwdriver, and while doing so, you slip and STAB yourself with it! As 
                the darkness closes in, you notice the writing on the sign seems to have changed.`,"You have picked up a semi-sharp object and died","toolRoom")):(game.rooms.toolRoom.attempt=4,game.screwdriver=!0,game.rooms.toolRoom.item="",msg("You take the Phillips head screwdriver."),addScore(3),refresh()):(game.rooms.toolRoom.attempt=1,kill(`You grab the Phillips head screwdriver, and while doing so, you slip and STAB yourself with it! As 
                the darkness closes in, you notice the writing on the sign seems to have changed.`,"You have picked up a semi-sharp object and died","toolRoom")))}]},Game.rooms.artGallery=()=>{header("Art Gallery"),desc(`Before being picked over by vandals, this was a beautiful art gallery. Sadly,
  there is no chance for you to be a vandal; all the paintings have been stolen.`),setExitsHeader(["right","down"]),cmd("l",["taste art gallery","You seem to misunderstand what people are saying when they declare the art is “tastefully done.”"]),cmd("f",["feel wall","You're the touchy-feely type, aren't you?"]),cmd("s",["smell art gallery","It smells of very old paint."]),cmd(["left","up"],["plant nose firmly into wall","Your face smarts for a moment after walking straight into the stone wall."]),cmd("down",["exit art gallery",()=>go("throneRoom")]),cmd("right",["exit art gallery",()=>go("smellyRoom")])},Game.rooms.blueprintDesk=()=>{header("Top of Hill"),desc(`At the top of this sunny little hill is a wide oak table. It looks like
  someone has been here recently.`),cmd("s",["sniff air","Smells like early morning dew."]),cmd("l",["lick ground","It tastes very much like dirt from your own time."]),cmd("f",["feel ground","You press your hands into the dirt."]),cmd("b",["yell",()=>{msg("AAAAAOOOOUUUIIIIEEE!!"),msg("The yell carries far over the distant hills.")}]),cmd(["left","right","up"],["wander off","You could easily become lost in time that way."]),game.directionsReversed?(setExitsHeader(["up"]),cmd("up",["head down hill",()=>go("pastGarden")])):(setExitsHeader(["down"]),cmd("down",["head down hill",()=>go("pastGarden")]))},Game.rooms.cannonRoom=()=>{header("Cannon Room"),desc("The walls at the top of this lonely tower are blasted and blackened with gunpowder. A narrow stair descends back down to the hallway."),cmd("s",["smell cannon","Smells like gunpowder."]),cmd("l",["lick cannon","The cannon would appreciate it if you wouldn't."]),cmd("f",["feel cannon","It's cold and metal."]),setExitsHeader(["down"]),cmd(["left","right","up"],["walk into wall","You resist the urge to smack straight into the castle wall."]),cmd("down",["descend stairs",()=>{go(game.things.greenDoor.location)}])},Game.rooms.clamRoom=()=>{header("Dungeon"),desc(`The hewn dungeon walls round off as they deepen into a bleak, damp cave. The 
  air is thick and wet.`),setExitsHeader(["up","down"]),cmd("s",["smell air","It smells like an enormous clam has lived in here for years-so, pretty much like Skippers."]),"clamRoom"===game.things.ferociousClam.location&&(game.whistle&&cmd("w",["blow whistle",()=>{msg("The owl appears, sees the fearsome clam, and flaps away terrified!")}]),game.pepper)&&cmd("g",["grind pepper","The clam is now better seasoned but no less ferocious."]),cmd(["left","right"],["walk into cave wall","You resist the urge to smack straight into a cave wall."]),cmd(["up","c"],["ascend stairs",()=>{"clamRoom"===game.things.ferociousClam.location&&msg("You dodge the attack of the fearsome clam and run up the stairs, narrowly escaping with your life!"),go("smellyRoom")}]),cmd("down",["descend deeper into the dungeon",()=>{"clamRoom"===game.things.ferociousClam.location&&msg("You dodge the attack of the fearsome clam and run down the stairs, narrowly escaping with your life!"),go("dragonCave")}])},Game.rooms.crocodileDentistOffice=()=>{header("Crocodile Dentist Office"),desc(`Soft jazz plays from a quiet speaker overhead, inoffensive as the white fluorescent lights and 
  the stack of ancient magazines on the table.`),setExitsHeader(["right","left"]),cmd("l",["taste office","Umm, no."]),cmd("f",["feel wall","You're the touchy-feely type, aren't you?"]),cmd("s",["smell office","It smells of novocaine."]),cmd("r",["read very old magazines","Nah, you did that word jumble back in 1983."]),game.whistle&&cmd("w",["blow whistle",()=>{msg("The owl appears, sees the crocodile dentist, and flaps away terrified!")}]),game.pepper&&cmd("g",["grind pepper","“Mmmm,” says the crocodile dentist, licking his considerable chops. “My lunch has seasoned itself!”"]),cmd(["down","up"],["find wall with my nose","You found it! You can't go that way."]),cmd("left",["exit crocodile dentist office",()=>go("mazeEntrance")]),cmd("right",["exit crocodile dentist office",()=>kill("The crocodile dentist devours you as you attempt to pass! As he eats you, you decide he could definitely improve his flossing technique.","Never smile at a crocodile","crocodileDentistOffice")])},Game.rooms.diningHall=()=>{header("Dining Hall"),desc(`A vast dining hall, the kind they use in movies for fancy parties, stretches off into darkness. 
  You could probably fit an army in here.
  A set of stairs heads up to the scullery.`),cmd("s",["smell dining hall","The air is thick with old fried food and pretentiousness."]),cmd("l",["lick dining hall","Your supposed to eat IN this room, not eat the room."]),cmd("f",["feel wall","You're the touchy-feely type, aren't you?"]),setExitsHeader(["up"]),cmd(["left","down","right"],["walk into wall","Bumping into the wall will not help you in this story."]),cmd("up",["ascend stairs",()=>go("scullery")])},Game.rooms.draftyRoom=()=>{header("Drafty Room"),desc(`The air blows swiftly here to a wide opening in the floor. A long chain descends into the hole to a dark smoky chamber
  below. A narrow window overlooks a charming rose garden far below the castle wall.`),setExitsHeader(["left","right"]),cmd("h",["hint","This room could use some pepper."]),cmd(["up","down"],["walk into wall","Your nose is slightly bent following the attempt."]),cmd("s",["smell drafty room","It smells windy."]),cmd("l",["lick drafty room","You can't lick the wind."]),cmd("f",["feel air","The air is blowing rapidly down into the opening in the floor."]),cmd("c",["climb down chain",()=>go("dragonRoost")]),game.pepper&&cmd("g",["grind pepper",()=>{msg("Great clouds of pepper drift on the air currents down into the opening in the floor."),msg("ACHOOO!"),msg("A firey blast escapes the chamber below! Someone down there can't handle a little pepper in the air!"),"roseGarden"===game.things.rubyRose.location&&game.dragonValve&&(msg(`Through the window, you can make out a bit of flame dancing in the rose garden. It would 
          appear that your actions have managed to scorch a few bushes.`),game.things.rubyRose.location="",game.things.scorchedRubyRose.location="roseGarden",addScore(3),refresh())}]),cmd("right",["enter the maze entrance",()=>go("mazeEntrance")]),cmd("left",["enter scullery",()=>go("scullery")])},Game.rooms.dragonCave=()=>{header("Dragon Cave"),desc("In the shadows is a narrow opening lit by a hot orange glow. Above the opening is very ominous-looking sign in gothic lettering."),setExitsHeader(["up","down","left"]),cmd(["right"],["I want to walk into a cave wall","You resist the urge to smack straight into a cave wall."]),cmd(["r","x"],["read sign","The sign reads: “Stop grinding pepper in the dragon's roost, you idiots!”"]),cmd("s",["smell cave","Like fire and old limestone."]),cmd("l",["lick dragon cave (with tongue)","It tastes hot and stony."]),cmd("f",["feel cave","You're the touchy-feely type, aren't you?"]),cmd(["down","i"],["enter the roost",()=>go("dragonRoost")]),cmd("left",["enter the shorts reverser room",()=>go("shortsReverserRoom")]),cmd("up",["leave the dragon pen",()=>go("clamRoom")])},Game.rooms.dragonRoost=()=>{header("Dragon Roost"),desc(`A vast underground cavern is lit by the gentle orange breath of a massive dragon, big as a football field.
  She seems mostly uninterested in you. A long chain descends from the chamber above.`),setExitsHeader(["up"]),cmd("h",["hint","If you want to get the dragon to breath some fire, this is not the room to be in when it happens."]),cmd(["left","right","down"],["walk into cave wall please","You resist the urge to smack straight into a cave wall."]),cmd("b",["yell",()=>{msg("AAAAAOOOOUUUIIIIEEE!!"),msg("“Nice lungs,” says the dragon.")}]),cmd("v",["converse with the very large dragon",()=>{msg(`“I enjoy chatting with the thieves who break into this castle,” says the dragon.
    “Of course, no-one likes a burglar, but I sometimes find them yummy.”`)}]),cmd("l",["lick dragon (with my tongue)","Even if that were possible, why?"]),cmd("s",["sniff air","The air smells of sulfur and dragon-breath."]),cmd("f",["feel dragon","It's like petting a ginormous gecko."]),cmd("c",["climb up the chain",()=>go("draftyRoom")]),cmd(["up","o"],["exit the roost",()=>go("dragonCave")]),cmd("x",["examine the enormous dragon","It appears as though she's on the verge of taking a nap."]),game.pepper&&cmd("g",["grind pepper",()=>{msg("The smell of pepper mingles with the smoke."),msg("“Ahhh!” cries the dragon, “I'm allergic to pepper!” She holds her long snout. “Ah... AHHHH...”"),kill("The cavern is instantly engulfed in flames!","You have become ionized gas 🔥","dragonRoost")}]),cmd("a",["attack the enormous dragon",()=>kill("Well, you can guess how that worked out.","You have been smooshed","dragonCave")])},Game.rooms.endGame=()=>{header("You've Won!"),desc(`You are on a tropical island on a beautiful sunny day. The air is filled with the scent the of fresh baked cookies.
    Presently, you sit on top of a throne, which in turn is atop of a giant pile of gold, big enough to swim in like a cartoon duck.
    Stealing that treasure from the castle and investing prudently has returned generous dividends.
    <p>
    On your throne is a scroll machine with a small red button.
    </p>
    <p>
    A tome of timeless wisdom lies here, begging to be read.
    </p>`),cmd("s",["sniff air","I told you, it smells like cookies."]),cmd("l",["lick massive pile of gold","Gold isn't known for being delicious."]),cmd("p",["push button on scroll dispenser",()=>{msg("The scroll machine whirrs to life, and prints a scroll. The scroll reads:"),msg(pick(["Did you try feeling the murderous barbershop quartet?","Did you try licking the crocodile dentist?","Did you talk to the dragon?","Did you lick the sculptures in the gallery?","Did you converse with the griffin?","Did you push the button in the shorts-reverser room?","Did you grind pepper in front of the griffin or the fearsome clam?","Did you stop and smell the roses in the rose garden?","Did you try taking the blueprints in the past?"])),msg("The scroll then vanishes into nothingness.")}]),cmd("c",["converse with someone","Sadly, being fabulously rich has alienated you from most of your friends."]),cmd("f",["feel pile of gold","You run your fingers through the gold and laugh maniacally."]),cmd("r",["read tome of wisdom",()=>{msg("Congratulations! You've completed Steal 10 Treasures to Win This Game!"),msg(ranking()),msg(`You did this in only ${game.turns} moves.`),msg("If you would like to play again, press the ~y key.","sub")}]),cmd("help",["help",()=>{msg("If you would like to play again, press the ~y key, or you could press ~p to activate the scroll machine or ~. to attempt taking one more treasure.","sub")}]),cmd("y",["restart",()=>{clear(),window.location.reload()}])},Game.rooms.entryHall=()=>{header("Entry Hall"),desc(`A formerly grand entry hall stands before you, lined by 
  cracked marble pillars and with passageways in all directions.`),setExitsHeader(["up","down","left","right"]),cmd("s",["sniff air","The entry hall smells important somehow."]),cmd("l",["lick entry room","It tastes exactly as you imagine it does."]),cmd("f",["feel wall","You're the touchy-feely type, aren't you?"]),cmd(["down","o"],["leave castle",()=>go("frontDoor")]),cmd("up",["enter maze of deadly spikes",()=>go("sharpRoom")]),cmd("left",["enter throne room",()=>go("throneRoom")]),cmd("right",["enter the griffin room",()=>go("griffinRoom")])},Game.rooms.frontDoor=()=>{header("At the Front Door"),msu(),desc(`A dark oak slab of door hangs on wide iron hinges.
    Perched high above on the wall is a 
    gargoyle, making a goofy smirk.`),setExitsHeader(["up","down"]),cmd("l",["taste wall","The castle walls taste of old stone and spiders."]),cmd("f",["feel wall","It feels cold."]),cmd("b",["yell",()=>{msg("AAAAAOOOOUUUIIIIEEE!!"),msg("Nothing happens.")}]),cmd("s",["smell castle","You can smell danger."]),cmd("p",["push doorbell repeatedly","“Cut that out,” says the gargoyle, wholly annoyed."]),cmd(["left","right"],["plant nose firmly into wall","Your face smarts for a moment after walking straight into the stone wall."]),cmd("down",["follow path",()=>go("startRoom")])},Game.rooms.gardenOfTime=()=>{header("Garden of Time"),desc(`Stepping stones form a little trail between a fierce bramble of roses. Rising above the thorns is a great bronze clock with a 
  long gleaming lever on one side.`),setExitsHeader(["left"]),cmd("h",["hint","It would appear that you can manipulate time itself with the lever on that clock."]),cmd(["up","right","down"],["walk into rose bush","A few cuts from the thorns and you decide to take a different course of action."]),cmd("s",["sniff air","Mmmm. Roses and night air."]),cmd("l",["lick roses","You're no aphid."]),cmd("f",["feel roses","They feel thorny."]),cmd("r x",["examine clock","In faded letters beneath the clock you can read the words: “The Garden of Time.”"]),cmd("b",["yell",()=>{msg("AAAAAOOOOUUUIIIIEEE!!"),msg("The roses pay no heed to your cries.")}]),cmd("p",["push lever","The lever is already in a forward position."]),cmd("y",["pull lever",()=>{msg(`You give the lever a hard pull and the clock begins to work. Time unravels around you in a dancing cacophony of light
    and dark, color and black, noise and silence...`),msg("The clock stops and you find yourself centuries in the past."),go("pastGarden")}]),cmd("left",["follow path",()=>go("roseGarden")])},Game.rooms.griffinRoom=()=>{header("Griffin Room"),desc("This is a foul, tight little space, as though some very unhygienic animal has made it's home in here."),setExitsHeader(["left","up"]),cmd(["right","down"],["walk into wall","Your nose is slightly bent following the attempt."]),cmd("s",["sniff air","It smells like that griffin has kept his litter box in here."]),"griffinRoom"===game.things.griffin.location&&(game.whistle&&cmd("w",["blow whistle",()=>{msg("“What an annoying sound,” said the griffin with a sneer."),msg(`Moments later an owl descends near the griffin. “What a challenging riddle!” hoots the owl. 
        “Of course, the answer depends on the hypotenuse of x.”`),msg("The griffin flushes red with rage. “What do you know of riddles?”"),msg("“Quite a lot, I should say,” said the owl. “Do you know my friend, the sphinx?”"),msg("The two begin a heated discussion about lateral thinking and wander off into the depths of the castle."),game.things.griffin.location="",game.things.griffinFeather.location="griffinRoom",msg("You can't help but notice the griffin appears to have left something behind."),refresh()}]),game.pepper)&&cmd("g",["grind pepper","“ACHOO! Cut that out,” says the griffin. “Pepper makes me sneezy.”"]),cmd("left",["leave the griffin room",()=>go("entryHall")]),cmd("up",["enter sculpture gallery",()=>go("sculptureGallery")])},Game.rooms.mazeEnd=()=>{header("Maze End"),desc("You stand at the end of the maze of twisty passages. Be proud of yourself—not many have seen this room."),cmd("s",["sniff air","It smells like victory."]),cmd("l",["lick maze","You've already defeated the maze."]),cmd("f",["feel wall","You're the touchy-feely type, aren't you?"]),setExitsHeader(["down"]),cmd("b",["yell",()=>{msg("AAAAAOOOOUUUIIIIEEE!!"),msg("The maze doesn't care about your screaming.")}]),cmd(["down","right","up"],["walk into wall","You attempt to re-enter the maze by walking into a wall, but nothing is gained."]),cmd("down",["enter fiendish maze",()=>go("mazeEntrance")])},Game.rooms.mazeEntrance=()=>{header("Maze Entrance"),desc("Just ahead is the entrance to a maze of twisty little passages, all alike."),setExitsHeader(["down","up","left","right"]),cmd(["right"],["walk into wall","You attempt to solve the maze by walking into a wall, but nothing is gained."]),cmd("s",["sniff air","It smells better than that other maze in that last castle."]),cmd("l",["lick maze (with my tongue)","You'll lick this maze yet!"]),cmd("f",["feel wall","You're the touchy-feely type, aren't you?"]),game.things.mazeMap.rotated?cmd("h",["hint","Nothing more to do here."]):cmd("h",["hint","Turning the map will help you solve the maze."]),cmd("b",["yell",()=>{msg("AAAAAOOOOUUUIIIIEEE!!"),msg("“Nice lungs,” says the dragon.")}]),cmd("up",["enter fiendish maze",()=>{game.things.mazeMap.rotated?go("mazeEnd"):(msg("You enter the maze but get all turned around. It's almost like that map was backwards."),msg("Soon you find yourself elsewhere in the castle..."),go(pick(["diningHall","crocodileDentistOffice","clamRoom","sharpRoom","artGallery"])))}]),cmd("down",["return to sculpture gallery",()=>go("sculptureGallery")]),cmd("left",["enter the drafty room",()=>go("draftyRoom")]),cmd("right",["enter the crocodile dentist office",()=>go("crocodileDentistOffice")])},Game.rooms.mirrorsHall=()=>{"mirrorsHall"===game.things.barbershopQuartet.location?(header("Hall of Mirrors"),desc(`The walls are covered full of warpy mirrors, like in a funhouse. Some sinister presence lurks here, beyond
    mere carnival nightmares.`),cmd(["left","right"],["I want to walk into a mirror","You have successfully smudged a mirror."]),cmd("up",["enter the rose garden",()=>{kill(`“FOOL!” cries a well-harmonized set of voices. As the word hangs in the air, the walls made of mirror-glass shudder treacherously.
        “Now you will experience SHAVE-AND-A-HAIRCUT... FOR DEATH!”`,"You have been cut short","mirrorsHall")}]),cmd("down",["enter the room of 10000 spikes",()=>{msg("A fragment of a sinister harmony carries on the air as you leave."),go("sharpRoom")}])):(header("Hall of (Smashed) Mirrors"),desc("The former funhouse effect is gone—this is now a chamber of broken shards and dangerous, cut glass."),cmd(["left","right"],["I want to walk into the broken glass","Sure."]),cmd("up",["enter the rose garden",()=>go("roseGarden")]),cmd("down",["enter the room of 10000 spikes",()=>go("sharpRoom")])),setExitsHeader(["up","down"]),cmd("s",["smell hall of mirrors","You reflect on the smell of the Hall of Mirrors."]),cmd("l",["lick hall of mirrors (with my tongue)","You just HATE your tongue, don't you?"]),cmd("f",["feel hall of mirrors","You'll cut yourself."])},Game.rooms.owlCageRoom=()=>{header("Owl Cage Room"),desc(`You are at the top of a tall tower. On the wall is a long lever, controlling a heavy shutter mechanism over a window.
  The window is ${game.towerWindowOpen?"open":"shut"}.
  A lonely stair descends back down to the hallway.`),setExitsHeader(["down"]),cmd(["left","right","up"],["walk into wall","You resist the urge to smack straight into the castle wall."]),cmd("y",["pull the window lever",()=>{game.towerWindowOpen?msg("The window shutter is already open."):(game.towerWindowOpen=!0,msg("CRANK! The window shutter opens permitting a cool gentle breeze."))}]),cmd("s",["smell owl cage room","It smells of sadness, like a trapped animal yearning for freedom."]),cmd("l",["lick owl cage room","It tastes of tears and old owl feathers."]),cmd("f",["feel wall","You're the touchy-feely type, aren't you?"]),cmd("p",["push the window lever",()=>{game.towerWindowOpen?(game.towerWindowOpen=!1,msg("CRANK! The window shutter closes. I'm not sure why you did that, but I'm sure you have a good reason.")):msg("The window shutter is already closed.")}]),cmd("down",["descend stairs",()=>{go(game.things.redDoor.location)}])},Game.rooms.pastGarden=()=>{header("Open Field"),desc("The morning sun bathes this open field in early light. There is little here, save for a great bronze clock with a lever on the side."),cmd(["left","down","right"],["wander around","You could very easily become lost in the past."]),cmd("x",["examine clock","In faded letters beneath the clock you can read the words: “The Garden of Time.”"]),cmd("y",["pull lever","The lever is already pulled back."]),cmd("s",["sniff air","Smells like early morning dew."]),cmd("l",["lick ground","It tastes very much like dirt from your own time."]),cmd("f",["feel ground","You press your hands into the dirt."]),cmd("b",["yell",()=>{msg("AAAAAOOOOUUUIIIIEEE!!"),msg("The yell carries far over the distant hills.")}]),cmd("p",["push lever",()=>{msg(`You give the lever a hard push and the clock begins to work. Time unravels around you in a dancing cacophony of light
    and dark, color and black, noise and silence...`),msg("The clock stops and you find yourself returned to your own time."),game.things.blueprint.turned?game.directionsReversed=!0:game.directionsReversed=!1,go("gardenOfTime")}]),game.directionsReversed?(setExitsHeader(["down"]),cmd("down",["walk up hill",()=>go("blueprintDesk")])):(setExitsHeader(["up"]),cmd("up",["walk up hill",()=>go("blueprintDesk")]))},Game.rooms.pricelessMapRoom=()=>{header("Priceless Map Room"),desc("You are at the top of a tall tower. A lonely stair descends back down to the hallway."),setExitsHeader(["down"]),cmd(["left","right","up"],["walk into wall","You resist the urge to smack straight into the castle wall."]),cmd("s",["sniff air","Smells like old maps and treasure."]),cmd("l",["lick map room","Mmm. It tastes better than Frobs McNally OR Flathead Guide."]),cmd("f",["feel wall","You're the touchy-feely type, aren't you?"]),cmd("b",["yell",()=>{msg("AAAAAOOOOUUUIIIIEEE!!"),msg("Nothing happens.")}]),cmd("down",["descend stairs",()=>{go(game.things.blueDoor.location)}])},Game.rooms.roseGarden=()=>{header("Rose Garden"),desc(`A thick bramble of roses hedges up against the castle wall, which looms dark in the thin rays of the moon.
  On the wall is a valve next to a large exhaust pipe, which is ${game.dragonValve?"open":"shut"}.`),setExitsHeader(["left","down","right"]),cmd(["up"],["walk into rose bush","A few cuts from the thorns and you decide to take a different course of action."]),cmd("s",["sniff air",()=>{game.dragonValve?msg("The air smells vaguely of sulfur and dragon-breath."):msg("Mmmm. Roses and night air.")}]),cmd("l",["lick roses (with my tongue)","You're no aphid."]),cmd("f",["feel roses","They feel thorny."]),cmd("b",["yell",()=>{msg("AAAAAOOOOUUUIIIIEEE!!"),msg("The roses pay no heed to your cries.")}]),cmd(["r","x"],["examine exhaust pipe",`It's the kind of valve you have to turn to open.
  Under the pipe you can make out: CAUTION! EXHAUST CAN BE IN EXCESS OF 3000 DEGREES 🔥 IF DRAGON HAS INDIGESTION!`]),cmd("t",["turn valve",()=>{game.dragonValve?(msg("The dragon exhaust valve is now shut."),game.dragonValve=!1):(msg("The valve opens and the smell of smoke fills the air."),game.dragonValve=!0)}]),cmd("down",["follow path",()=>go("mirrorsHall")]),cmd("left",["enter shed",()=>go("toolRoom")]),cmd("right",["follow path",()=>go("gardenOfTime")])},Game.rooms.scullery=()=>{header("Scullery"),desc("You're in a filthy old scullery. It all but sickens your stomach to think of food prepared in here. A narrow stair leads downwards to the dining hall."),setExitsHeader(["right","down"]),cmd("l",["taste scullery","If you wanna catch an infection, here's your chance."]),cmd("s",["smell scullery","It smells like something was cooked in here recently."]),cmd("f",["feel wall","You're the touchy-feely type, aren't you?"]),cmd(["left","up"],["plant nose firmly into wall","The filthy scullery wall leaves a greasy smudge on your nose."]),cmd("right",["go through the narrow door",()=>go("draftyRoom")]),cmd("down",["descend stairs",()=>go("diningHall")])},Game.rooms.sculptureGallery=()=>{header("Sculpture Gallery"),game.things.blueprint.turned?(desc("Several beautiful masterpieces of marble stand here, pointing to a door on an otherwise blank wall."),setExitsHeader(["up","down","right"]),cmd(["right","i"],["enter door",()=>go("secretGallery")]),cmd("x",["examine statues","They appear to be pointing to a door."]),cmd("left",["plant my nose firmly into wall","Your face smarts for a moment after walking straight into the stone wall."])):(desc(`Several beautiful masterpieces of marble stand here, pointing at a blank space of wall.
        You can't help but feel that they're pointing at a door that isn't there. Opposite the blank 
        wall is a doorway leading into a bottomless pit.`),setExitsHeader(["up","down","right"]),cmd(["right","i"],["jump into bottomless pit",()=>kill(`You leap into the bottomless pit, with predictable results. It occurs to you as you fall (forever) that if 
            the whole room was somehow turned around, you would have gone deeper into the castle instead of into this pit.`,"You have fallen and you can't get up","sculptureGallery")]),cmd("x",["examine statues","They appear to be pointing to a blank wall. It feels like there should be a door there."]),cmd("left",["plant my nose firmly into wall","Your face smarts for a moment after walking straight into the stone wall. Still, you can't help but feel a door should be here."])),game.treasure.platinumStatue?cmd("h",["give me a hint will you","Nothing more to do here"]):cmd("h",["give me a hint will you","If only there was a way to turn this whole castle around, so the door was facing the other way..."]),cmd("l",["taste sculptures","Not bad, but you prefer the flavor of limestone."]),cmd("v",["converse with statues","Your attempts to communicate with the statues fall on lifeless ears."]),cmd("f",["feel statues","The statues are indifferent."]),cmd("s",["Smell sculptures","It smells of old statues."]),cmd("down",["leave gallery",()=>go("griffinRoom")]),cmd("up",["leave gallery",()=>go("mazeEntrance")])},Game.rooms.secretGallery=()=>{header("Secret Gallery"),desc("Hidden away in this tiny dusty hole is a secret art gallery."),setExitsHeader(["left"]),cmd("s",["Smell secret gallery","Mmm. Hot and enclosed small spaces."]),cmd("l",["lick secret gallery","This isn't an important room, so there's not a lot in here, ok?"]),cmd("f",["feel wall","You're the touchy-feely type, aren't you?"]),cmd(["down","right","up"],["plant nose firmly into wall","Your face smarts for a moment after walking straight into the stone wall."]),cmd("left",["exit gallery",()=>go("sculptureGallery")])},Game.rooms.sharpRoom=()=>{header("Room of 10,000 Spikes"),desc("Save for a treacherous walkway, this room is a maze of deadly needle-sharp spikes. Simply tripping in this room could kill you."),setExitsHeader(["up","down"]),cmd(["left","right"],["walk into spiky wall","No acupuncture today, thanks."]),cmd("s",["Smell spikes","It smells like the kind of place where an archaeologist in a movie would die."]),cmd("l",["lick spikes","You don't need a tongue piercing."]),cmd("f",["feel wall","Ouch! That's sharp!"]),cmd("up",["navigate maze of deadly spikes",()=>go("mirrorsHall")]),cmd("down",["navigate maze of deadly spikes",()=>go("entryHall")])},Game.rooms.shortsReverserRoom=()=>{header("Shorts Reverser Room"),desc(`This is a very important room, though it's not entirely clear what for. A large button is set into the wall with the words 
  “Shorts Reverser” on it.`),setExitsHeader(["right"]),cmd(["left","up","down"],["walk into wall","BONK! Thanks, that was helpful."]),cmd(["x","r"],["read button","The button says “Shorts Reverser” on it."]),cmd("s",["sniff air","It smells vaguely of shorts, only backwards."]),cmd("f",["feel button","The button feels pretty good."]),cmd("l",["lick button","They cover it in yucky stuff to keep kids from eating it."]),cmd("p",["push button","You press the button, and a Mr. Roger R. Tortoise of Cleveland, Ohio, finds the shorts he's wearing mysteriously flipped backwards."]),cmd("right",["leave the shorts reverser room",()=>go("dragonCave")])},Game.rooms.smellyRoom=()=>{header("Smelly Room"),desc("It's unclear as to why, but this room smells AWFUL. A dark stair descends into the dungeon."),setExitsHeader(["down","left","right"]),cmd("h",["hint","This room could use a sign."]),cmd(["up"],["walk into wall","The wall resists your efforts to move through it."]),cmd("s",["Smell smelly room","You're already holding your nose as it is!"]),cmd("l",["lick smelly room","Just... WHY??"]),cmd("f",["feel wall","You're the touchy-feely type, aren't you?"]),cmd(["down","c"],["descend dark stairs",()=>go("clamRoom")]),cmd("left",["enter the art gallery",()=>go("artGallery")]),game.pirateDefeated?cmd("right",["enter long hallway",()=>{go("hallOne")}]):cmd("right",["enter long hallway",()=>{msg(`A wicked pirate confronts you as you enter! “You overcame the poison ice cream earlier tonight,”
        he chortles. “Can you resist the poison popsicle?`),game.commands={},msg("Press ~y to accept the poisonous popsicle, and ~n to refuse.","sub"),cmd("help",["help",()=>{msg("Press ~y to accept the poisonous popsicle, and ~n to refuse.","sub")}]),cmd("y",["say yes to the poisonous popsicle",()=>kill("Hey, what could go wrong?","You have absolutely no willpower","smellyRoom")]),cmd("n",["no to the poisonous popsicle",()=>{msg("“No?” says the pirate, shocked. “As in, NO, you can't resist? Well, here it is!”"),msg("He whips out a used popsicle stick and bellows with laughter. “Why, I'm an old sea calf!” he cries. “I already ate the blasted thing!”"),msg("He then wanders off into the castle."),game.pirateDefeated=!0,go("hallOne")}])}])},Game.rooms.startRoom=()=>{header("In the Forest"),desc(`At the edge of the woods under bright moonlight stands a vast crumbling castle. A winding path
    meanders ahead to the front door. Near the path is a large friendly sign.`),setExitsHeader(["up"]),cmd("c",["climb tree","You climb a tree to find a fabulous jeweled egg with—ha! Just kidding. There's nothing up the trees."]),cmd("s",["sniff air","The air smells of leaves after a fresh rain."]),cmd("l",["lick trees","Mmm, barky."]),cmd("f",["feel trees","Feels like trees."]),cmd("j",["jump","You jump just hard enough to shake a few lower branches."]),cmd(["down","left","right"],["traverse forest","What? When there's a castle full of treasure just waiting ahead?"]),cmd("up",["follow path",()=>go("frontDoor")])},Game.rooms.throneRoom=()=>{header("Throne Room"),desc("Once, this was a magnificent throne room, but any former glory has long since been stolen or decayed."),setExitsHeader(["right","up"]),cmd("s",["Smell throne room","It smells of old royalty."]),cmd("l",["lick throne room","You're a strange one, aren't you?"]),cmd(["down","left"],["plant nose firmly into wall","Your face smarts for a moment after walking straight into the stone wall."]),cmd("right",["exit throne room",()=>go("entryHall")]),cmd("up",["exit throne room",()=>go("artGallery")])},Game.rooms.toolRoom=()=>{header("Tool Shed"),desc("You are in a dank, musty tool shed."),setExitsHeader(["right"]),cmd("l",["taste wall","The tool room does not taste special."]),cmd("s",["smell tool room","It smells like stale gasoline."]),cmd("f",["feel wall","You're the touchy-feely type, aren't you?"]),cmd(["left","down","up"],["plant nose firmly into wall","Your face smarts for a moment after walking straight into the stone wall."]),cmd("right",["exit shed",()=>go("roseGarden")])},Game.rooms.hallOne=()=>{header("Long Hallway (narrow end)"),desc("You're in a long corridor, which narrows to an exit on the left."),setExitsHeader(["left","right","up"]),cmd("s",["Smell hallway","Ah, the fine aroma of castle corridors."]),cmd("l",["lick hallway","It doesn't taste all that special."]),cmd("f",["feel wall","You're the touchy-feely type, aren't you?"]),cmd(["down"],["walk into wall","Your nose is slightly bent following the attempt."]),cmd("right",["walk hallway",()=>go("hallTwo")]),cmd("left",["walk hallway",()=>go("smellyRoom")])},Game.rooms.hallTwo=()=>{header("Long Hallway (middle part)"),desc("You're in a long corridor, in the middle part."),setExitsHeader(["left","right","up"]),cmd("s",["Smell hallway","Ah, the fine aroma of castle corridors."]),cmd("l",["lick hallway","It doesn't taste all that special."]),cmd("f",["feel wall","You're the touchy-feely type, aren't you?"]),cmd(["down"],["walk into wall","Your nose is slightly bent following the attempt."]),cmd("right",["walk hallway",()=>go("hallThree")]),cmd("left",["walk hallway",()=>go("hallOne")])},Game.rooms.hallThree=()=>{header("Long Hallway (far end)"),desc("You're in a long corridor, on the far end. On the wall is a large impressive button."),setExitsHeader(["left","up"]),cmd("s",["Smell hallway","Ah, the fine aroma of castle corridors."]),cmd("l",["lick hallway","It doesn't taste all that special."]),cmd("f",["feel large button","It feels like it does something quite important."]);cmd(["down","right"],["walk into wall","Your nose is slightly bent following the attempt."]),cmd("h",["give me a hint will you","It would appear that this button literally moves the towers around in this hallway."]),cmd("p",["go ahead and press the large impressive button",()=>{msg(`The doors on the hallway behind you flip in the air like cherries on a slot machine. In a few seconds, they 
    land flat on the wall, now in a shuffled order.`);for(const e of[game.things.blueDoor,game.things.redDoor,game.things.greenDoor])"hallOne"===e.location?e.location="hallThree":"hallTwo"===e.location?e.location="hallOne":"hallThree"===e.location&&(e.location="hallTwo");refresh()}]),cmd("left",["walk hallway",()=>go("hallTwo")])},Game.things.barbershopQuartet={desc:"A scary-looking sign is affixed to the wall.",location:"mirrorsHall",s:["sniff sniff sniff","You detect the scent of aftershave."],x:["examine murderous barbershop quartet","They're invisible. Didn't you read the sign?"],f:["feel murderous barbershop quartet","“Cut that out!” they cry in unison."],l:["lick murderous barbershop quartet (with my tongue)","As curious as you are about the taste of a murderous invisible barbershop quartet, that may be inadvisable."],v:["converse with the murderous invisible barbershop quartet","“Our invisibility has made us vicious!” says the quartet in perfect harmony and from thin air. “People are always bumping into us!”"],a:["attack murderous invisible barbershop quartet",()=>{kill("You attempt a direct assault on the murderous invisible barbershop quartet.","You have been shaving-creamed","mirrorsHall")}],h:["give me a hint will you","Consider doing some vocal exercises."],b:["yell",()=>{msg("WAAAAAAAAAA!"),msg("As you yell, the murderous barbershop quartet harmonizes with you! The mirrors, made of glass, ripple dangerously..."),msg("SMASH! Shattered glass explodes from the walls and the invisible barbershop quartet flees for their lives!"),game.things.barbershopQuartet.location="",refresh()}],r:["read the scary-looking sign",()=>{msg("The scary-looking sign reads:"),msg(`Beware, adventurers! This room is the lair of a murderous invisible barbershop quartet.
        Leave before they permanently coiffure you from existence!`)}]},Game.things.blueDoor={desc:"A large blue door is here, beckoning you to come in.",location:"hallTwo","i up":["enter the door",()=>{msg("You enter the door and climb the stairs beyond."),go("pricelessMapRoom")}]},Game.things.blueprint={desc:"On the table is a blueprint of the very castle you've been exploring.",location:"blueprintDesk","r x":["read blueprints",()=>{game.things.blueprint.turned?msg("It looks like the castle you've been exploring, but turned around."):msg(`It looks pretty much like the castle you've been exploring. You 
            can't help but wonder if the whole thing would look better turned 
            around.`)}],h:["give me a hint will you","Turning the blueprint appears to affect the future construction of the castle."],t:["turn blueprints",()=>{msg("You rotate the blueprints 180 degrees."),game.things.blueprint.turned?(game.things.blueprint.turned=!1,msg(`Somehow, you get the feeling that the castle will be 
            back exactly to normal.`)):(game.things.blueprint.turned=!0,msg(`Somehow, you can't shake the feeling that you've massively
            affected future events.`))}],inv:["foolishly take blueprint, utterly disregarding the rules of time travel",()=>{msg("Taken."),kill(`FOOM! As you steal the blueprints for the castle, you create a big swirling
        time paradox that sucks you in. Whoops!`,"You have been erased from existence","blueprintDesk")}]},Game.things.cannon={desc:"Fixed in place next to an open window is a large imposing cannon with a draw-string.",location:"cannonRoom",t:["move cannon","The cannon is too heavy to move."],x:["examine cannon",()=>{msg("It appears to be ready to fire."),msg(`A helpful-looking crab scuttles up to your keyboard and says: “Hey! you can fire the cannon by giving the 
        draw-string a good yank!”`),msg("The helpful crab scuttles away.");var e=["hallOne","hallTwo","hallThree"],o=game.things.greenDoor.location,o=e.indexOf(o),e=e.indexOf(game.things.redDoor.location);msg(e===o-1||e===o+1?"The cannon is aimed out the window, pointing at the next tower over.":"The cannon is aimed out the window, pointing at nothing.")}],a:["attack cannon",()=>kill("You attack the cannon and get your face blown off!","You have been canonized","cannonRoom")],h:["give me a hint will you","It would seem a good idea to use this cannon to free the owl from his cage in the other tower."],y:["pull draw-string",()=>{msg("BOOM! 💥 The cannon thunders and a HUGE cannonball fires into the air!");var e=["hallOne","hallTwo","hallThree"],o=game.things.greenDoor.location,o=e.indexOf(o),e=e.indexOf(game.things.redDoor.location);e===o-1||e===o+1?game.towerWindowOpen?"owlCageRoom"!==game.things.owlCage.location?msg("The cannonball sails through the window of the next tower over."):(msg("The cannonball sails through the window of the next tower over, followed by a loud thundering CRASH!"),msg(`Moments later an overjoyed owl flaps into the room. “Thank you, kind adventurer!” hoots the owl. 
                    “Because of you, I am free of that loathsome cage.” He drops a whistle into your open palm.
                    “In this castle are many diabolical traps and puzzles. Should you encounter a riddle beyond your comprehension,
                    blow this whistle and I will come assist. Farewell!”`),msg("He flaps off into the night."),game.things.owlCage.location="",game.whistle=!0,msg("You can now press ~w to blow the whistle.","sub"),addScore(3),refresh()):msg("The cannonball lands harmlessly on the closed window of the next tower over."):msg("The cannonball sails harmlessly into the night. You hope it doesn't crush a passing seagull.")}]},Game.things.chowderFestival={location:"diningHall",desc:"A HUGE clam chowder festival is going on in here, and everybody is devouring chowder with gusto.",l:["eat some chowder","You attempt to try some chowder and are whacked on the noggin with a ladle for your efforts."],a:["attack chowder festival","Never attack a furious chowder-crazed mob on your own."],h:["give me a hint will you","Hmm. Perhaps it would be helpful to divert this crowd to another room."],s:["smell clam chowder festival","It smells like fantastic!"],v:["converse with chowder enthusiasts","“Good chowder, but we're running out of clams. That's literal clams, not money.”"],b:["yell at clam chowder festival","They don't appear to notice-or they don't care."]},Game.things.clamPearl={desc:"Sitting unattended here is an perfect pearl, the kind made inside of giant killer clams.",location:"",x:["examine clam pearl","Anyone who says that clams don't make pearls should see this thing—it is exquisite!"],inv:["take clam pearl",()=>{msg("Taken."),addScore(5),msg(`A cheerful little teddy bear with an enormous satchel appears and grabs the clam pearl. 
        “Good job!” he says with a smile. “I'll just drop this treasure into your safe deposit box for you.”`),game.things.clamPearl.location="",refresh(),depositTreasure("clamPearl")}]},Game.things.crocodileDentist={location:"crocodileDentistOffice",desc:"The crocodile dentist is here, awaiting his next patient.",x:["examine the crocodile dentist","Is he a crocodile who happens to be a dentist, or is a dentist who services only crocodiles? The answer is <i>both</i>."],l:["lick crocodile dentist (with my tongue)","Mmm. Tastes a LOT like chicken."],f:["feel crocodile dentist","This isn't a petting zoo."],b:["yell at crocodile dentist",()=>{msg("AAAAAAAAAAAA!"),msg("“Your molars are in good shape,” says the crocodile dentist, looking into your open maw.")}],v:["converse with crocodile dentist","You have a long and fruitful discussion with the crocodile dentist about preventing gingivitis."],a:["attack crocodile dentist",()=>kill("The crocodile dentist makes a hot lunch out of you! As you go down, it occurs to you that the crocodile has more gum disease than you'd expect for a dentist.","Never smile at a crocodile","crocodileDentistOffice")],h:["give me a hint will you","There's no way to get past the crocodile dentist."],s:["smell crocodile dentist","Mmmm, fresh novocaine."]},Game.things.diamondSpike={desc:"Near the path is a large spike of pure diamond. It looks so sharp you might kill yourself just picking it up.",location:"sharpRoom",x:["examine diamond spike",`It's the most valuable pointy thing you've ever seen, except maybe for that one time with 
    the Faberge pencil.`],h:["give me a hint will you","Maybe you should just take the spike and see what happens."],inv:["carefully take diamond spike",()=>{msg("You very carefully remove the diamond spike."),msg("Taken."),addScore(5),msg(`A cheerful little teddy bear with an enormous satchel appears and grabs the diamond spike. 
        “Good job!” he says with a smile. “I'll just drop this treasure into your safe deposit box for you.”`),game.things.diamondSpike.location="",refresh(),depositTreasure("diamondSpike")}]},Game.things.doorbell={location:"frontDoor",desc:"Next to the door is a cheery little doorbell.",x:["examine cheery doorbell","It has a gentle yellow glow."],"i up":["enter castle","You should open the door somehow first."],h:["give me a hint will you","Don't eat the ice cream."],p:["I want to ring the doorbell",()=>{msg("A merry chime rings from inside the castle."),msg(`Moments later, a staticky speaker comes to life inside the 
        gargoyle above your head:`),msg(`“Greetings adventurer! No doubt you've come to plunder this
        dangerous castle for treasure. To make you feel welcome, enjoy
        this very safe (and not poisoned) ice cream cone.”`),msg(`A small hatch opens near the door, and a stone hand
        emerges holding a delicious ice cream cone.`),msg("Press ~l to lick, ~s to sniff, or ~p to push the ice cream cone away.","sub"),game.commands={},cmd("help",["help",()=>{msg("Press ~l to lick, ~s to sniff, or ~s to push the ice cream cone away.","sub")}]),cmd("l",["enjoy delicious ice cream",()=>{kill(`You take a hearty lick off the cone. It is the best
            ice cream you've ever had! You continue to explore the castle.
            Two months later, you collapse as the slow-acting poison in the ice cream
            melts your liver into a puddle of caustic hydrocarbons.`,"You have been creamed","startRoom")}]),cmd("s",["smell the ice cream","Mmmm. Vanilla and... What is that? Amanita phalloides?"]),cmd("p",["refuse the ice cream cone",()=>{msg(`“Hey!” crackles the gargoyle speaker. “Why would anyone refuse 
            free ice cream? It's irresistible!”`),msg(`The speaker emits a loud, disgusting slurp. “Delicious!
            Hey, let me get that door for you.”`),msg("Seconds later the door swings open."),addScore(3),game.things.doorbell.location="",game.things.frontDoorOpen.location="frontDoor",refresh()}])}]},Game.things.dragonEgg={desc:"Sparkling in the smoke is a magnificent gold dragon egg!",location:"dragonRoost",x:["examine gold egg","It must be worth its weight in gold, because it IS gold!"],h:["give me a hint will you","The egg is a treasure-you should take it."],inv:["take gold egg",()=>{msg("It occurs to you as you pick it up that its not precisely shaped like an egg."),msg("Taken."),msg("“Oh, thanks for cleaning my litter box,” says the dragon. “That's what I get for eating an entire Arby's for lunch.”"),addScore(5),msg(`A cheerful little teddy bear with an enormous satchel appears and grabs the gold “egg.”  “Good job!”
        he says with <s>revulsion</s> a smile. “I'll just drop this treasure into your safe deposit box for you.”`),game.things.dragonEgg.location="",refresh(),depositTreasure("dragonEgg")}]},Game.things.dragonSign={desc:"Posted above the hole is a very serious-looking sign.",location:"draftyRoom",r:["read serious-looking sign",()=>{msg("Dragon is allergic to:"),msg("peanuts"),msg("lilacs"),msg("hay")}],t:["take sign","The sign is fixed in place."]},Game.things.ferociousClam={location:"clamRoom",desc:"You are being attacked by a FEROCIOUS CLAM!",x:["examine clam","The clam is the most dangerous monster you've ever seen!"],l:["lick clam","It tastes yummy AND fierce!"],f:["feel clam","Feels like shell."],b:["yell at clam","That accomplishes less than you'd expect."],v:["converse with deadly clam of overwhelming size","You have a very cheerful conversation with the clam. It may be terrifying, but it knows how to chat."],a:["attack clam",()=>kill("The clam strikes back, and you are DEAD!","You have been chowdered by a clam","clamRoom")],h:["give me a hint will you","This clam would be dead if there was a big enough chowder to put it in."],s:["smell clam please","It smells like terror!"]},Game.things.forestSign={location:"startRoom",x:["examine the sign","You can just imagine the bearded hippie who likely painted this sign, smelling distinctly of nutritional yeast."],r:["read sign",`Adventurers Beware!
        This castle is protected by a copious cornucopia of 
        ingenious traps and terrible monsters. Proceed at your 
        own risk!
    `],inv:["take sign","The sign is too heavy to move."],p:["push sign","The sign is too heavy to move."],y:["pull sign","The sign is too heavy to move."]},Game.things.frontDoorOpen={location:"",desc:"The front door is open, leading in the castle.",x:["examine door","The door is open, beckoning entry."],i:["enter door",()=>go("entryHall")],up:["enter door",()=>go("entryHall")]},Game.things.griffinFeather={desc:"Lying in the dust is a rare griffin feather.",location:"",x:["examine rare griffin feather","The griffin feather looks like it would fetch a good price on Antiques Roadshow."],inv:["take rare griffin feather",()=>{msg("Taken."),addScore(5),game.things.griffinFeather.location="",msg(`A cheerful little teddy bear with an enormous satchel appears and grabs the rare griffin. 
        “Good job!” he says with a smile. “I'll just drop this treasure into your safe deposit box for you.”`),refresh(),depositTreasure("griffinFeather")}]},Game.things.goldenShirt={desc:"Lying on a pedestal is an ordinary T-shirt, made of solid gold. I guess it's not ordinary after all.",location:"mazeEnd","r x":["read golden shirt","It says: “I solved the maze twisty passages, all alike, and all I got was this stupid T-shirt.”"],inv:["take golden shirt",()=>{msg("Taken."),addScore(5),msg(`A cheerful little teddy bear with an enormous satchel appears and grabs the golden T-shirt. 
        “Good job!” he says with a smile. “I'll just drop this treasure into your safe deposit box for you.”`),game.things.goldenShirt.location="",refresh(),depositTreasure("goldenShirt")}]},Game.things.greenDoor={desc:"A large green door is here, beckoning you to come in.",location:"hallThree","i up":["enter the door",()=>{msg("You enter the door and climb the stairs beyond."),go("cannonRoom")}]},Game.things.griffin={desc:`An enormous griffin rests here, with an annoying smirk on his face. He regards you with a nod and says: “Adventurer, 
    answer my riddle. If a tree falls in the forest, what time will the 3 o' clock train to Chattanooga arrive?”`,location:"griffinRoom",h:["give me a hint will you","If you make a friend in the castle with a gift for riddles, they might be helpful here."],x:["examine griffin",()=>{msg(`"Studying me to find some weakness in my riddle?" asks the griffin. "Well, it won't work."`)}],l:["lick griffin (with my tongue)","“Would you cut that out please?” says the griffin, thoroughly grossed out."],f:["feel griffin","You give the griffin a few friendly pets and he purrs contentedly."],v:["converse with the griffin","“Want a hint for my impossible riddle?” he sneers. “Guess! Is it 1 o' clock? 2 o' clock? Or some other hour?”"],a:["attack griffin",()=>kill("SLASH! The griffin ENDS you with one swipe of his claws!","You didn't make the cut","griffinRoom")],1:["Answer 1 o' clock ",()=>{kill("“Wrong!” cries the griffin. He shoots lasers from his eyes and you are fried to a crisp!","You are now charcoal briquettes","griffinRoom")}],2:["Answer 2 o' clock ",()=>{kill("“Wrong!” cries the griffin. He shoots lasers from his eyes and you are fried to a crisp!","You are now charcoal briquettes","griffinRoom")}],3:["Answer 3 o' clock ",()=>{kill("“Wrong!” cries the griffin. He shoots lasers from his eyes and you are fried to a crisp!","You are now charcoal briquettes","griffinRoom")}],4:["Answer 4 o' clock ",()=>{kill("“Wrong!” cries the griffin. He shoots lasers from his eyes and you are fried to a crisp!","You are now charcoal briquettes","griffinRoom")}],5:["Answer 5 o' clock ",()=>{kill("“Wrong!” cries the griffin. He shoots lasers from his eyes and you are fried to a crisp!","You are now charcoal briquettes","griffinRoom")}],6:["Answer 6 o' clock ",()=>{kill("“Wrong!” cries the griffin. He shoots lasers from his eyes and you are fried to a crisp!","You are now charcoal briquettes","griffinRoom")}],7:["Answer 7 o' clock ",()=>{kill("“Wrong!” cries the griffin. He shoots lasers from his eyes and you are fried to a crisp!","You are now charcoal briquettes","griffinRoom")}],8:["Answer 8 o' clock ",()=>{kill("“Wrong!” cries the griffin. He shoots lasers from his eyes and you are fried to a crisp!","You are now charcoal briquettes","griffinRoom")}],9:["Answer 9 o' clock ",()=>{kill("“Wrong!” cries the griffin. He shoots lasers from his eyes and you are fried to a crisp!","You are now charcoal briquettes","griffinRoom")}],b:["scream in frustration",'"Ha!" laughs griffin. "My riddle is causing you no small distress, I see."']},Game.things.heavyThrone={desc:"An incredibly valuable golden throne is here! It isn't nailed down so it must be yours for the taking!",location:"throneRoom",x:["examine throne","It must weigh a ton."],f:["feel throne","It feels valuable."],h:["give me a hint will you","It's time for you to take the throne-literally."],inv:["take throne",()=>{msg("Your lumbar complains about you stealing the ridiculously heavy throne!"),msg("Taken."),addScore(5),msg(`A cheerful little teddy bear with an enormous satchel appears and grabs the throne with considerable effort. 
        “Good job!” he says with a smile. “I'll just drop this treasure into your safe deposit box for you.”`),game.things.heavyThrone.location="",refresh(),depositTreasure("heavyThrone")}]},Game.things.jeweledScrew={desc:"Set into the wall is a platinum jeweled screw, on which likely hung a priceless work of art.",location:"artGallery",x:["examine jeweled screw",()=>{msg("If you had a Phillips head screwdriver on you, you could pretty easily get it out of the wall.")}],"t inv":["remove jeweled screw from wall",()=>{game.screwdriver?(msg(`The screwdriver easily gets the platinum jeweled screw out of the wall,
            though the screwdriver itself breaks in the process. You discard the broken tool.`),game.screwdriver=!1,addScore(5),msg(`A cheerful little teddy bear with an enormous satchel appears and grabs the platinum jeweled screw. 
            “Good job!” he says with a smile. “I'll just drop this treasure into your safe deposit box for you.”`),game.things.jeweledScrew.location="",game.item="",refresh(),depositTreasure("jeweledScrew")):msg(`You attempt to remove the jeweled screw with no success. If you had a Phillips head screwdriver on you,
            you could pretty easily get it out of the wall.`)}],h:["give me a hint will you","If you could find a screwdriver somewhere 🪛, you could just take that jeweled screw."],p:["push jeweled screw","The platinum jeweled screw is in the wall too tight."],y:["pull jeweled screw","The platinum jeweled screw is in the wall too tight."]},Game.things.mazeMap={desc:"Posted on the wall is a map to the maze. This game is almost too easy!",location:"mazeEntrance",rotated:!1,"r x":["examine maze map",()=>{game.things.mazeMap.rotated?msg("Right, down, left, right... Yeah you can memorize this."):msg("Left, up, right, left... Yeah you can memorize this.")}],inv:["take maze map",()=>{msg("It's too big for you to lug around.")}],t:["rotate maze map",()=>{game.things.mazeMap.rotated?msg("It doesn't need to be turned around any more."):(game.things.mazeMap.rotated=!0,msg("You turn the maze map 180 degrees. It looks much better now!"))}]},Game.things.owlCage={desc:"Locked in a heavy iron cage is a very sad-looking owl. He gives you a plaintive 'hoot' as you enter.",location:"owlCageRoom",x:["examine owl cage",()=>{msg("You'd need a battering ram or a cannon to open that cage.")}],h:["give me a hint will you","That cannon in the other tower might be useful, but you'll need to open the shutter in here first."],v:["converse with owl","“I don't mind being locked up... Actually, that's a lie. I don't know why I lied to you just now...”"],b:["yell","The owl hoots belatedly along with you."],l:["lick cage","The cage tastes solid."]},Game.things.pepperGrinder={desc:"Set on the cavern floor is a somewhat charred pepper grinder.",location:"dragonCave",inv:["take the pepper grinder",()=>{game.pepper=!0,game.things.pepperGrinder.location="",msg("You grab the pepper grinder off the floor."),addScore(3),msg(`A very helpful-looking crab scuttles up next to your keyboard. “Hey!” says the crab, “You can now 
        press ~g to grind clouds of pepper into the air!”`),refresh()}]},Game.things.platinumStatue={desc:"Lying neglected here is a priceless platinum statue!",location:"secretGallery",x:["examine platinum statue","It's supposed to be either a rabbit or a toucan, you can't be sure which."],inv:["take platinum statue",()=>{msg("Taken."),addScore(5),msg(`A cheerful little teddy bear with an enormous satchel appears and grabs the platinum statue. 
        “Good job!” he says with a smile. “I'll just drop this treasure into your safe deposit box for you.”`),game.things.platinumStatue.location="",refresh(),depositTreasure("platinumStatue")}]},Game.things.redDoor={desc:"A large red door is here, beckoning you to come in.",location:"hallOne","i up":["enter the door",()=>{msg("You enter the door and climb the stairs beyond."),go("owlCageRoom")}]},Game.things.rubyRose={desc:"An exquisite rose made of solid ruby sits in the bramble.",location:"roseGarden",s:["smell the exquisite ruby rose","It smells delightfully of great value."],h:["hint","Some controlled fire from the dragon would be helpful here."],l:["lick the exquisite ruby rose","Your tongue isn't long enough."],inv:["take exquisite ruby rose",()=>{msg("OW! You can't quite reach the rose without getting yourself impaled by thorns.")}]},Game.things.scorchedRubyRose={desc:"An exquisite rose made of solid ruby sits in a pile of ashes.",location:"",s:["smell the exquisite ruby rose","It smells delightfully of great value."],l:["lick the exquisite ruby rose","Your tongue isn't long enough."],inv:["take exquisite ruby rose",()=>{msg("Taken."),addScore(5),msg(`A cheerful little teddy bear with an enormous satchel appears and grabs the exquisite ruby rose. 
        “Good job!” he says with a smile. “I'll just drop this treasure into your safe deposit box for you.”`),game.things.scorchedRubyRose.location="",refresh(),depositTreasure("rubyRose")}]},Game.things.toolSign={location:"toolRoom","r x":["read sign",()=>{game.rooms.toolRoom.attempt?1===game.rooms.toolRoom.attempt?msg("The sign reads: “You should try taking the screwdriver again.”"):2===game.rooms.toolRoom.attempt?msg("The sign reads: “Try that again. Don't worry, it won't kill you this time.”"):3===game.rooms.toolRoom.attempt?msg("The sign reads: “Try it one more time, I PROMISE it won't kill you.”"):3<game.rooms.toolRoom.attempt&&msg("The sign reads: “See? I told you it wouldn't kill you.”"):msg("The sign reads: “Go ahead and take the screwdriver.”")}],t:["turn sign","The sign needs no rotation."],p:["push sign","The sign is too heavy to move."],y:["pull sign","The sign is too heavy to move."]},Game.things.trapEmerald={desc:"Lying near your throne is a football-sized pure green emerald.",location:"endGame",x:["examine emerald","You can't recall seeing this bit of treasure before. It might not be yours."],inv:["take trap emerald",()=>{msg("Taken."),kill(`A legion of teddy bears descend on you and bludgeon you with comfy cushions. You're only supposed to steal 10
        treasures, not 11!`,"Green is the color of greed","endGame")}]},Game.things.treasureMap={desc:"Hanging on the wall is a priceless antique map, valuable beyond compare!",location:"pricelessMapRoom",x:["examine priceless map","It appears to be a map of New Jersey."],inv:["take priceless map",()=>{msg("Taken."),addScore(5),msg(`A cheerful little teddy bear with an enormous satchel appears and grabs the priceless map of New Jersey. 
        “Good job!” he says with a smile. “I'll just drop this treasure into your safe deposit box for you.”`),game.things.treasureMap.location="",refresh(),depositTreasure("treasureMap")}]};var game={};const resetGame=()=>{game=null,game={...Game},remCursor(),setItems(),intro(),go("startRoom"),addCursor()},cleanUpKey=e=>"inv"===e?"period":"help"===e?"?":"score"===e?"$":"credits"===e?";":"music"===e?"#":e,performMusicToggle=()=>{game.musicToggle?(game.musicToggle=!1,game.music&&(game.music.pause(),game.music=null),msg("Music off.")):(game.musicToggle=!0,msu(),msg("Music on."))};function createCommonResponses(){game.commands={},game.printPlayerHelp=printPlayerHelp,cmd("q",["quit game",()=>{msg("Are you sure you want to quit? Hit ~y or ~n."),game.commands={},cmd("help",["help",()=>{msg("Please hit ~y or ~n.","sub")}]),cmd("y",["I am done",()=>{clear(),window.location.reload()}]),cmd("n",["keep playing",()=>go(game.location)])}]),cmd("space",["look around",look]),cmd("l",["I want to lick something","You taste nothing special."]),cmd("s",["sniff sniff sniff","You smell nothing special."]),cmd("r",["do some reading","There's nothing here to read."]),cmd("x",["examine (something)","There is nothing here worth examining."]),cmd("h",["give me a hint will you","No hints in the current room."]),cmd("f",["feel around","You feel nothing special."]),cmd("inv",["can I take anything in here","There's nothing here worth taking."]),cmd("up",["move ahead","You can't go that way."]),cmd("down",["move backwards","You can't go that way."]),cmd("right",["move right","You can't go that way."]),cmd("left",["move left","You can't go that way."]),cmd("c",["I want to climb something","Climbing here gets you nowhere."]),cmd("i",["enter","There's nothing to enter."]),cmd("o",["exit","There's nothing to exit."]),cmd("y",["yank something","There's nothing here to yank."]),cmd("p",["push anything","There's nothing here to push."]),cmd("v",["converse (with yourself)","You converse eagerly with yourself and find the conversation to be less intelligent than expected."]),cmd("b",["yell","Your loud hollering accomplishes nothing."]),game.pepper&&cmd("g",["grind pepper","Your surroundings are now more peppery."]),game.whistle&&cmd("w",["blow my whistle",()=>{msg(pick(["A shrill tone reverberates in the air.","The owl flies onto your shoulder, looks around, and leaves immediately.","The owl flies overhead. “No riddles here. See you!” He then flaps away.","The owl appears. “No riddles here. Why did you blow the whistle?” He than flaps away.","The owl shows up as prompted, sees nothing of interest, and flaps off.","The owl flaps overhead, with an annoyed expressions. Seeing nothing of interest, he disappears."]))}]),cmd("a",["attack (something)","There's nothing here to attack."]),cmd("t",["turn (or rotate)","You spin around in place."]),cmd("help",["help",()=>game.printPlayerHelp()]),cmd("score",["score",()=>msg(ranking())])}function printCredits(){msg("Steal 10 Treasures to Win This Game"),msg("A game by spaceflounder"),msg('This game was written for <a href="https://itch.io/jam/parsercomp-2023" target="_blank" rel="noopener noreferrer">ParserComp 2023</a>.'),msg("Version 1.0.4 Post ParserComp 2023 Release."),msg('Thanks to <a href="https://freemusicarchive.org/music/holiznacc0/" target="_blank" rel="noopener noreferrer">HoliznaCC0</a> for creating the music used in this game.'),msg("Copyright © 2023 spaceflounder"),msg("MIT License","lic"),msg("Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the “Software”), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:","lic"),msg("The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.","lic"),msg("THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.","lic")}function desc(e){game.desc=e}function look(){refresh(),msg(game.header,"room"),msg(game.desc),handleThingsDesc(game.things),handleItemsDesc(),game.item&&msg(`You're carrying a ${game.items[game.item].shortDesc}.`)}function setExitsHeader(e){e?(game.directionsReversed&&(e=e.map(e=>"left"===e?"right":"right"===e?"left":"up"===e?"down":"down"===e?"up":void 0)),game.headerExits=e.sort().map(e=>{switch(e){case"up":return"↑";case"left":return"←";case"right":return"→";default:return"↓"}}).join(" ")):game.headerExits=void 0}function header(e){game.header=e}function addScore(e){msg(1<e?`Your score 🏆 has gone up ${e} points.`:`Your score 🏆 has gone up ${e} point.`,"sub"),game.score+=e}function updateHeaderBar(){var e,o,t=document.getElementById("header");t&&(o=document.createElement("div"),e=document.createElement("div"),t.innerHTML="",o.append(game.header),o.className="exits",e.className="exits",e.append("🏆 "+game.score),t.appendChild(o),game.headerExits&&((o=document.createElement("div")).className="exits",o.append("🧭 "+game.headerExits),t.appendChild(o)),t.appendChild(e))}function printPlayerHelp(){let e="",o="";game.pepper&&(e="<td>~g To Grind some pepper</td>"),game.whistle&&(o="<td>~w To blow the whistle</td>"),msg(`
        Steal 10 Treasures to Win This Game is a one-letter parser game. Each command is
        accomplished by pressing a single key on the keyboard, then pressing the Enter key.
        <table class="help">
        <tr>
        <td>
        Arrow ~↑, ~↓, ~← or ~→ to navigate
        </td>
        <td>
        Space bar to show room description
        </td>
        </tr>
        <tr>
        <td>
        ~x Examine ~r Read
        </td>
        <td>
        ~p Push ~y Pull
        </td>
        </tr>
        <tr>
        <td>
        ~s Smell ~l Lick ~f Feel 
        </td>
        <td>
        ~t Turn ~b Yell ~a Attack
        </td>
        </tr>
        <tr>
        <td>
        ~. To take an item, or drop an item if you're holding it
        </td>
        <td>
        ~c to Climb, ~v to Converse
        </td>
        </tr>
        <tr>
        ${e}
        ${o}
        </tr>
        <tr>
        <td>
        Obvious room exits are displayed next to the 🧭
        </td>
        <td>
        Your score is displayed next to the 🏆
        </td>
        </tr>
        <tr>
        <td>
        ~h For a hint about the current room
        </td>
        <td>
        ~# Toggle music
        </td>
        </tr>
        <tr>
        <td>
        ~; Credits ~$ Score
        </td>
        <td>
        ~q Quit the game
        </td>
        </tr>
    </table>
    There may also be some secret commands, if you can find them.
    `)}function handleItemsCommands(){var e=["inv"],o=game.location,o=game.rooms[o];if(o.item){o=o.item;const t=game.items[o];e.map(e=>{t[e]&&cmd(e,t[e](t))})}if(game.item){o=game.item;const a=game.items[o];e.map(e=>{"t"!==e&&a[e]&&cmd(e,a[e](a))})}}function handleItemsDesc(){var e=game.location,e=game.rooms[e];e.item&&(e=e.item,msg(game.items[e].desc))}function setItems(){for(const o of Object.keys(game.items)){var e=game.items[o];e.initialLocation&&(e=e.initialLocation,game.rooms[e].item||(game.rooms[e].item=o))}}function takeItem(e,o){var t=game.location,t=game.rooms[t];o=o||"Taken.",t.item===e&&(game.item?msg("My hands are full."):(game.item=t.item,t.item=null,msg(o),refresh()))}function dropItem(e,o){var t=game.location,t=game.rooms[t];o=o||"Dropped.",t.item||(game.item?(t.item=game.item,game.item=null,refresh(),msg(o)):msg(`You can't drop the ${game.items[e].shortDesc} with
            the ${game.items[t.item].shortDesc} here.`))}function taunt(){var e=["Well, that was rich.","Don't worry, that wasn't the worst game I've ever seen. Maybe the second worst.","Thank you for playing. I've enjoyed watching you, for the most part.","Centuries from now, aliens will study your remains and find them, <i>ahem,</i> interesting.","Not bad. Not good, but, well..."];return shuffle(e),e[0]}function kill(e,o,t){game.commands={},msg(e),msg(o,"epitaph"),msg(taunt()),msg(ranking()),msg("Would you like to try again?"),msg("Press ~y to try again or ~n to quit.","sub"),cmd("help",["help",()=>{msg("Press ~y to try again or ~n to quit.","sub")}]),cmd("y",["yes",()=>{msg("Okay... I'll do my best... Here goes nothing..."),go(t)}]),cmd("n",["no",()=>{window.location.reload()}])}function go(e){setExitsHeader(null),createCommonResponses(),game.location=e,game.rooms[e](),look()}function ranking(){var e=["bungling burglar","lost explorer","semi-competent castle-crawler","skilled treasure-hunter","master adventurer"],o=game.score,t=o/65,t=Math.floor((1<t?1:t)*e.length),a=game.treasure??{};return`So far, you've collected ${Object.keys(a).length} treasures. You've scored ${o} out of 65, earning you the rank of ${e[t]??"master adventurer"}.`}function refresh(){createCommonResponses(),game.rooms[game.location](),handleThingsCommands(game.things),handleItemsCommands(),updateHeaderBar()}window.addEventListener("load",()=>{fullCommand=null,response=null,cmdKey=null,resetGame(),window.addEventListener("keydown",e=>{e.preventDefault()}),window.addEventListener("keyup",e=>{let o=e.key.toLowerCase();" "===o?o="space":"#"===o?o="music":"?"===o?o="help":"$"===o?o="score":";"===o?o="credits":"backspace"===o||"delete"===o?cmdKey&&(o="",fullCommand=null,response=null,cmdKey=null,remCursor(),addCursor()):"."===o?o="inv":"arrowleft"===o?o="left":"arrowright"===o?o="right":"arrowup"===o?o="up":"arrowdown"===o&&(o="down"),o&&("enter"!==o&&o in game.commands&&([fullCommand,response]=game.commands[o],repCursor(fullCommand),cmdKey=o),response)&&"enter"===o&&(remCursor(),msg(`<div>> ${fullCommand}</div><div>(${cleanUpKey(cmdKey)} key)</div>`,"res spaced"),"string"==typeof response?msg(response):response(),game.turns+=1,addCursor(),updateHeaderBar(),fullCommand=null,response=null,cmdKey=null),"credits"===o?(fullCommand="display credits",response=printCredits,cmdKey=";",repCursor(fullCommand),cmdKey=o):"music"===o&&(fullCommand="toggle music",response=performMusicToggle,cmdKey="%",repCursor(fullCommand),cmdKey=o)})});const shuffle=e=>{let o=e.length,t;for(;0!=o;)t=Math.floor(Math.random()*o),o--,[e[o],e[t]]=[e[t],e[o]];return e},roll=e=>e>=Math.floor(100*Math.random()),countdown=e=>1<e.length?e.pop():e[0],pick=e=>{var o=`p{${stringToHash(e.join("-"))}}`;return game[o]&&game[o]?.length||(game[o]=shuffle([...e])),game[o].pop()};function handleThingsCommands(t){const a=["desc","active","location"];Object.keys(t).map(e=>{const o=t[e];o.location===game.location&&Object.keys(o).filter(e=>-1===a.indexOf(e)).map(e=>{-1<e.indexOf(" ")?cmd(e.split(" "),o[e]):cmd(e,o[e])})})}function handleThingsDesc(o){Object.keys(o).map(e=>{e=o[e];e.location===game.location&&e.desc&&msg(e.desc,"con")})}function depositTreasure(e){game.treasure[e]||(game.treasure[e]=!0),10===Object.keys(game.treasure).length&&(msg(`“Well done!” cries another little teddy bear with a disproportionately huge mallet behind his back. “That's the last treasure!
        I've got your prize right here!”`),msg("CRACK! The teddy bear whacks you over the head, and you awaken elsewhere..."),go("endGame"))}